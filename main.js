(()=>{"use strict";function t(t){function e(t){return Math.floor(Math.random()*(t-1+1)+1)}return[e(t),e(t)]}const e=function(t,e,n){let o=[],r=0,a=0;for(let s=0;s<e;s+=1)o.push({coords:[t[0]+a,t[1]+r],damaged:!1}),"h"===n?r+=1:a+=1;return o},n=function(){return{board:{placed:[],misses:[]},placeship:function(t,n){const o=function(t=[1,1],n=1,o="h",r=!1){return{length:n,damage:e(t,n,o),position:o,sunk:r,coords:t,hit:function(t){this.damage[t].damaged=!0},isSunk:function(){for(let t=1;t<this.damage.length;t+=1)if(!1===this.damage[t].damaged)return;this.sunk=!0},rotate:function(){let t="h";"h"===this.position&&(t="v"),this.damage=e(this.damage[0].coords,this.length,t),this.position=t}}}(t,n);this.board.placed.push(o)},randomize:function(e){const n=[];for(;n.length<e;){let e=t(10);for(;n.includes(e);)e=t(10);n.push(e)}n.forEach((t=>{this.placeship(t,1)}))},receiveAttack:function(t){const e=this.board.placed,n=function(){let n=!1;return e.forEach((o=>o.damage.forEach((r=>{r.coords.toString()===t.toString()&&(n=[e.indexOf(o),o.damage.indexOf(r)])})))),n}();if(this.board.misses.push(t),n)return e[n[0]].hit(n[1]),e[n[0]].isSunk(),e[n[0]].coords},areAllShipsSunk:function(){const t=this.board.placed;for(let e=0;e<t.length;e+=1)if(!0!==t[e].sunk)return!1;return!0}}},o=function(){return{attack:function(t,e){if(!t)return!1;const n=t.board.misses[0]?t.board.misses:[[]];for(let t=0;t<n.length;t+=1)if(n[t].toString()===e.toString())return!1;return t.receiveAttack(e)},randomAttack:function(e){const n=t(10),o=this.attack(e,n);return!1===o&&this.randomAttack(e),o}}},r=function(t){const e=document.createElement("table");e.classList.add("game-table"),e.classList.add("full-screen");const n=t<27?t:26,o=document.createElement("tr");for(let t=0;t<=n;t+=1){const e=document.createElement("th");0!==t&&(e.innerText=t),o.appendChild(e)}e.appendChild(o);for(let t=0;t<n;t+=1){const o=document.createElement("tr"),r=document.createElement("th");r.innerText=String.fromCharCode(t+65),o.appendChild(r);for(let e=0;e<n;e+=1){const n=document.createElement("td");n.setAttribute("data",`${t+1},${e+1}`),n.classList.add("grid"),o.appendChild(n)}e.appendChild(o)}return e},a=function(t,e){return t.querySelector(`[data="${e}"]`)||!1},s=document.querySelector("#top-center"),c=document.querySelector("#bottom-center");s.appendChild(r(10)),c.appendChild(r(10));const i=o(),d=n();d.randomize(5);const u=o(),l=n();l.randomize(5),function(t,e){for(let r=0;r<t.length;r+=1)n=e,o=t[r].coords.toString(),a(n,o).classList.add("ship");var n,o}(d.board.placed,c),document.addEventListener("click",(t=>{function e(t,e,n){const o=e.misses[e.misses.length-1].toString(),r=a(t,o),s=function(){const t=document.createElement("div");return t.classList.add("peg"),t}();r.appendChild(s),n&&s.classList.add("damaged")}const n=t.target.closest("table"),o=t.target.closest("td");if(o&&""==o.innerHTML&&s.querySelector("table")===n){const t=i.attack(l,o.getAttribute("data"));e(s,l.board,t);const n=u.randomAttack(d);e(c,d.board,n)}}))})();