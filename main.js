(()=>{"use strict";const t=function(t,e,n){let o=[],r=0,a=0;for(let c=0;c<e;c+=1)o.push({coords:[t[0]+a,t[1]+r],damaged:!1}),"h"===n?r+=1:a+=1;return o},e=function(){return{board:{placed:[],misses:[]},placeship:function(e,n){const o=function(e=[1,1],n=1,o="h",r=!1){return{length:n,damage:t(e,n,o),position:o,sunk:r,coords:e,hit:function(t){this.damage[t].damaged=!0},isSunk:function(){for(let t=1;t<this.damage.length;t+=1)if(!1===this.damage[t].damaged)return;this.sunk=!0},rotate:function(){let e="h";"h"===this.position&&(e="v"),this.damage=t(this.damage[0].coords,this.length,e),this.position=e}}}(e,n);this.board.placed.push(o)},randomize:function(t){const e=[];function n(t){function e(t){return Math.floor(Math.random()*(t-1+1)+1)}return[e(t),e(t)]}for(;e.length<t;){let t=n(10);for(;e.includes(t);)t=n(10);e.push(t)}e.forEach((t=>{this.placeship(t,1)}))},receiveAttack:function(t){const e=this.board.placed,n=function(){let n=!1;return e.forEach((o=>o.damage.forEach((r=>{r.coords.toString()===t.toString()&&(n=[e.indexOf(o),o.damage.indexOf(r)])})))),n}();if(this.board.misses.push(t),n)return e[n[0]].hit(n[1]),void e[n[0]].isSunk()},areAllShipsSunk:function(){const t=this.board.placed;for(let e=0;e<t.length;e+=1)if(!0!==t[e].sunk)return!1;return!0}}},n=function(){return{attack:function(t,e){if(!t)return!1;const n=t.board.misses[0]?t.board.misses:[[]];for(let o=0;o<n.length;o+=1)if(n[o].toString()!==e.toString())return t.receiveAttack(e),!0;return!1},randomAttack:function(t){const e=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];!1===this.attack(t,e)&&this.randomAttack(t)}}},o=function(t){const e=document.createElement("table");e.classList.add("game-table"),e.classList.add("full-screen");const n=t<27?t:26,o=document.createElement("tr");for(let t=0;t<=n;t+=1){const e=document.createElement("th");0!==t&&(e.innerText=t),o.appendChild(e)}e.appendChild(o);for(let t=0;t<n;t+=1){const o=document.createElement("tr"),r=document.createElement("th");r.innerText=String.fromCharCode(t+65),o.appendChild(r);for(let e=0;e<n;e+=1){const n=document.createElement("td");n.setAttribute("data",`${t+1},${e+1}`),n.classList.add("grid"),o.appendChild(n)}e.appendChild(o)}return e},r=function(t,e){const n=t.querySelector(`[data="${e}"]`);n.classList.add("ship");const o=document.createElement("div");o.classList.add("peg"),n.appendChild(o)},a=document.querySelector("#top-center"),c=document.querySelector("#bottom-center");a.appendChild(o(10)),c.appendChild(o(10)),n();const i=e();i.randomize(5),console.log(i.board.placed),n(),e().randomize(5),console.log(i),function(t,e){for(let n=0;n<t.length;n+=1)console.log(t[n].coords.toString()),r(e,t[n].coords.toString())}(i.board.placed,c),document.addEventListener("click",(t=>{t.target.closest("table"),t.target.closest("td")}))})();